
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Reshaping Data &#8212; Quantitative Reasoning in Biology</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/Module04/reshaping_data';</script>
    <link rel="canonical" href="https://damlabresources.github.io/quantitative-reasoning-in-biology/content/Module04/reshaping_data.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab" href="../../_bblearn/Module04/Module04_lab.html" />
    <link rel="prev" title="Walkthrough" href="../../_bblearn/Module04/Module04_walkthrough_SOLUTION.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../book_index.html">
  
  
  
  
  
  
    <p class="title logo__title">Quantitative Reasoning in Biology</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../book_index.html">
                    Quantitative Reasoning in Biology
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 0: Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/how_to.html">How to use this book</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 1 : Hello World</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module01/Module01_book.html">Module 1: Hello World</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Module01/notebook_actions.html">Notebook basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Module01/Module01_walkthrough.html">Walkthrough</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module02/Module02_book.html">Module 2: Simple calculations</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Module02/dilution_calculations.html">Molarity Calculations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module02/Module02_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module02/Module02_lab.html">Lab</a></li>


</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module03/Module03_book.html">Module 3: DataFrames</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Module03/spreadsheet_organization.html">Spreadsheet Organization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module03/Module03_walkthrough_SOLUTION.html">Walkthrough</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module03/Module03_lab.html">Lab</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 2 : Descriptive Statistics</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Module04_book.html">Module 4: Analysis by groups</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module04/Module04_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Reshaping Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module04/Module04_lab.html">Lab</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module05/Module05_book.html">Module 5: Plotting with Pandas</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module05/Module05_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module05/Module05_lab.html">Lab</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module06/Module06_book.html">Module 6: Visualizing with Confidence</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Module06/grammar_of_graphics.html">Grammar of Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module06/Module06_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module06/Module06_lab.html">Lab</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module07/Module07_book.html">Module 7: Samples and Replicates</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module07/Module07_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module07/Module07_lab.html">Lab</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Part 3 : Inferential Statistics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module08/Module08_book.html">Module 8: Hypothesis Testing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module08/Module08_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module08/Module08_lab.html">Lab</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module09/Module09_book.html">Module 9: Linear Regression</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module09/Module09_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module09/Module09_lab.html">Lab</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Module10/Module10_book.html">Module 10: Power Analysis</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module10/Module10_walkthrough_SOLUTION.html">Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../_bblearn/Module10/Module10_lab.html">Lab</a></li>

</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Extra</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/about_this_book.html">About this book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/course_info.html">Course Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/author_bio.html">About the Author</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/run_your_own_jupyter.html">Running Your Own Jupyter Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/works_cited.html">Works Cited</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/Module04/reshaping_data.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Reshaping Data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#food-table">Food Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#groupby">Groupby</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aggregate">Aggregate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform">Transform</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pivot">Pivot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="reshaping-data">
<h1>Reshaping Data<a class="headerlink" href="#reshaping-data" title="Link to this heading">#</a></h1>
<p>In this module we will cover different ways to reshape data to summarize large datasets into useful information.
This page covers the different functions using a bite-sized example.</p>
<section id="food-table">
<h2>Food Table<a class="headerlink" href="#food-table" title="Link to this heading">#</a></h2>
<p>This simple table contains a list of 20 foods along with category, color, and price.
We will use this table to demonstrate the different functions for reshaping data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="n">food_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;food_table.csv&#39;</span><span class="p">)</span>
<span class="n">food_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Food</th>
      <th>Category</th>
      <th>Price</th>
      <th>Color</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Apple</td>
      <td>Fruit</td>
      <td>1.2</td>
      <td>Red</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Banana</td>
      <td>Fruit</td>
      <td>0.9</td>
      <td>Yellow</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Carrot</td>
      <td>Vegetable</td>
      <td>0.5</td>
      <td>Yellow</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Tomato</td>
      <td>Vegetable</td>
      <td>0.7</td>
      <td>Red</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Chicken</td>
      <td>Protein</td>
      <td>3.0</td>
      <td>Brown</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Salmon</td>
      <td>Protein</td>
      <td>4.5</td>
      <td>Red</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Brown Rice</td>
      <td>Grain</td>
      <td>2.0</td>
      <td>Brown</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Broccoli</td>
      <td>Vegetable</td>
      <td>1.1</td>
      <td>Green</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Strawberry</td>
      <td>Fruit</td>
      <td>2.0</td>
      <td>Red</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Cheddar Cheese</td>
      <td>Dairy</td>
      <td>2.5</td>
      <td>Yellow</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Yogurt</td>
      <td>Dairy</td>
      <td>1.0</td>
      <td>Yellow</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Blueberry</td>
      <td>Fruit</td>
      <td>2.2</td>
      <td>Red</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Lentils</td>
      <td>Protein</td>
      <td>1.6</td>
      <td>Brown</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Spinach</td>
      <td>Vegetable</td>
      <td>1.2</td>
      <td>Green</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Tofu</td>
      <td>Protein</td>
      <td>1.8</td>
      <td>Brown</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Quinoa</td>
      <td>Grain</td>
      <td>3.1</td>
      <td>Brown</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Oatmeal</td>
      <td>Grain</td>
      <td>2.5</td>
      <td>Brown</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Egg</td>
      <td>Protein</td>
      <td>0.2</td>
      <td>Yellow</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Grapes</td>
      <td>Fruit</td>
      <td>2.0</td>
      <td>Red</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Potato</td>
      <td>Vegetable</td>
      <td>0.7</td>
      <td>Brown</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="groupby">
<h2>Groupby<a class="headerlink" href="#groupby" title="Link to this heading">#</a></h2>
<p>First, we will cover <code class="docutils literal notranslate"><span class="pre">groupby</span></code>. This function is used to group the data by a certain column and then apply a function to <em>other</em> columns.
The groupby function is useful when you want to split your data into groups based on some criteria and then perform calculations on each group separately.</p>
<p>For example, if you want to know:</p>
<ul class="simple">
<li><p>How many foods of each color are there?</p></li>
<li><p>What is the average price of foods in each category?</p></li>
<li><p>What is the most expensive food in each category?</p></li>
</ul>
<p>The general syntax is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;column_to_group_by&#39;</span><span class="p">)[</span><span class="s1">&#39;column_to_analyze&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">function</span><span class="p">()</span>
</pre></div>
</div>
<p>Let’s look at some examples below.</p>
<section id="aggregate">
<h3>Aggregate<a class="headerlink" href="#aggregate" title="Link to this heading">#</a></h3>
<p>In aggregation, we summarize multiple values into a <strong>single value</strong>.
This can be the count, mean, sum, median, or any provided function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group by color and count the number of foods in each</span>

<span class="n">food_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Color&#39;</span><span class="p">)[</span><span class="s1">&#39;Food&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Color
Brown     7
Green     2
Red       6
Yellow    5
Name: Food, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group by category and count the number of foods in each</span>

<span class="n">food_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)[</span><span class="s1">&#39;Food&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Category
Dairy        2
Fruit        5
Grain        3
Protein      5
Vegetable    5
Name: Food, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Group by category and find the mean price of foods in each category</span>

<span class="n">food_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)[</span><span class="s1">&#39;Price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Category
Dairy        1.750000
Fruit        1.660000
Grain        2.533333
Protein      2.220000
Vegetable    0.840000
Name: Price, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># You can also apply multiple functions at once</span>
<span class="n">food_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)[</span><span class="s1">&#39;Price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
    </tr>
    <tr>
      <th>Category</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Dairy</th>
      <td>1.750000</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Fruit</th>
      <td>1.660000</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Grain</th>
      <td>2.533333</td>
      <td>3</td>
    </tr>
    <tr>
      <th>Protein</th>
      <td>2.220000</td>
      <td>5</td>
    </tr>
    <tr>
      <th>Vegetable</th>
      <td>0.840000</td>
      <td>5</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="transform">
<h3>Transform<a class="headerlink" href="#transform" title="Link to this heading">#</a></h3>
<p>Sometimes, you need to have a new column that is a transformation of the existing column.</p>
<p>In our example, let’s put a <em>rank</em> for the most cheapest food in each category.
This new column needs to be the same length as the original column, so, the .agg method won’t work.
Instead we use the <code class="docutils literal notranslate"><span class="pre">.transform</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">food_data</span><span class="p">[</span><span class="s1">&#39;Rank&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">food_data</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Category&#39;</span><span class="p">)[</span><span class="s1">&#39;Price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="s1">&#39;rank&#39;</span><span class="p">)</span>
<span class="n">food_data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Price&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Food</th>
      <th>Category</th>
      <th>Price</th>
      <th>Color</th>
      <th>Rank</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10</th>
      <td>Yogurt</td>
      <td>Dairy</td>
      <td>1.0</td>
      <td>Yellow</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Cheddar Cheese</td>
      <td>Dairy</td>
      <td>2.5</td>
      <td>Yellow</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Banana</td>
      <td>Fruit</td>
      <td>0.9</td>
      <td>Yellow</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>0</th>
      <td>Apple</td>
      <td>Fruit</td>
      <td>1.2</td>
      <td>Red</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Strawberry</td>
      <td>Fruit</td>
      <td>2.0</td>
      <td>Red</td>
      <td>3.5</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Grapes</td>
      <td>Fruit</td>
      <td>2.0</td>
      <td>Red</td>
      <td>3.5</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Blueberry</td>
      <td>Fruit</td>
      <td>2.2</td>
      <td>Red</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Brown Rice</td>
      <td>Grain</td>
      <td>2.0</td>
      <td>Brown</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Oatmeal</td>
      <td>Grain</td>
      <td>2.5</td>
      <td>Brown</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Quinoa</td>
      <td>Grain</td>
      <td>3.1</td>
      <td>Brown</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Egg</td>
      <td>Protein</td>
      <td>0.2</td>
      <td>Yellow</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Lentils</td>
      <td>Protein</td>
      <td>1.6</td>
      <td>Brown</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Tofu</td>
      <td>Protein</td>
      <td>1.8</td>
      <td>Brown</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Chicken</td>
      <td>Protein</td>
      <td>3.0</td>
      <td>Brown</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Salmon</td>
      <td>Protein</td>
      <td>4.5</td>
      <td>Red</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Carrot</td>
      <td>Vegetable</td>
      <td>0.5</td>
      <td>Yellow</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Tomato</td>
      <td>Vegetable</td>
      <td>0.7</td>
      <td>Red</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Potato</td>
      <td>Vegetable</td>
      <td>0.7</td>
      <td>Brown</td>
      <td>2.5</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Broccoli</td>
      <td>Vegetable</td>
      <td>1.1</td>
      <td>Green</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>Spinach</td>
      <td>Vegetable</td>
      <td>1.2</td>
      <td>Green</td>
      <td>5.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now, all of the Rank values are calculated within each category.</p>
</section>
</section>
<section id="pivot">
<h2>Pivot<a class="headerlink" href="#pivot" title="Link to this heading">#</a></h2>
<p>Pivoting is a way to transform the data from a long format to a wide format.
In our example, the data is long because each food has its own row.
To convert it to a wide format, we need to decide the new rows, columns, and what goes at their intersection.
These new rows and columns should come from existing categorical columns in the dataset.</p>
<p>For example, we can create a table that shows:</p>
<ul class="simple">
<li><p>Rows: Food categories</p></li>
<li><p>Columns: Food colors</p></li>
<li><p>Values: Count of foods in each category-color combination</p></li>
</ul>
<p>This gives us a quick way to see patterns like:</p>
<ul class="simple">
<li><p>Which colors are most common in each food category?</p></li>
<li><p>Are there any category-color combinations with no foods?</p></li>
</ul>
<p>The pivot_table function in pandas makes this transformation easy. The basic syntax is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>              <span class="c1"># DataFrame to pivot</span>
               <span class="n">index</span><span class="o">=</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span>    <span class="c1"># Column to use for new rows</span>
               <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;col2&#39;</span><span class="p">,</span>  <span class="c1"># Column to use for new columns </span>
               <span class="n">values</span><span class="o">=</span><span class="s1">&#39;col3&#39;</span><span class="p">,</span>   <span class="c1"># Values to put in cells</span>
               <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;func&#39;</span><span class="p">)</span>  <span class="c1"># How to aggregate multiple values</span>
</pre></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">food_data</span><span class="p">,</span>         <span class="c1"># Dataframe to pivot</span>
               <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>  <span class="c1"># New rows</span>
               <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Color&#39;</span><span class="p">,</span>   <span class="c1"># New columns</span>
               <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Food&#39;</span><span class="p">,</span>     <span class="c1"># Values to consider</span>
               <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span><span class="p">,</span>   <span class="c1"># Function to aggregate multiple values into a single value</span>
               <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>      <span class="c1"># Fill missing values with</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Color</th>
      <th>Brown</th>
      <th>Green</th>
      <th>Red</th>
      <th>Yellow</th>
    </tr>
    <tr>
      <th>Category</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Dairy</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Fruit</th>
      <td>0</td>
      <td>0</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Grain</th>
      <td>3</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Protein</th>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Vegetable</th>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Or we can change the values to price and find the mean price of foods in each category and color.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">food_data</span><span class="p">,</span>         <span class="c1"># Dataframe to pivot</span>
               <span class="n">index</span><span class="o">=</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span>  <span class="c1"># New rows</span>
               <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;Color&#39;</span><span class="p">,</span>   <span class="c1"># New columns</span>
               <span class="n">values</span><span class="o">=</span><span class="s1">&#39;Price&#39;</span><span class="p">,</span>    <span class="c1"># Values to consider</span>
               <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span>    <span class="c1"># Function to aggregate multiple values into a single value</span>
               <span class="n">fill_value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>   <span class="c1"># Leave missing values empty</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Color</th>
      <th>Brown</th>
      <th>Green</th>
      <th>Red</th>
      <th>Yellow</th>
    </tr>
    <tr>
      <th>Category</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Dairy</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.75</td>
    </tr>
    <tr>
      <th>Fruit</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.85</td>
      <td>0.90</td>
    </tr>
    <tr>
      <th>Grain</th>
      <td>2.533333</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>Protein</th>
      <td>2.133333</td>
      <td>NaN</td>
      <td>4.50</td>
      <td>0.20</td>
    </tr>
    <tr>
      <th>Vegetable</th>
      <td>0.700000</td>
      <td>1.15</td>
      <td>0.70</td>
      <td>0.50</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>In this section, we have covered the following functions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">groupby</span></code>: Used to group the data by a certain column and then apply a function to <em>other</em> columns.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pivot_table</span></code>: Used to summarize the data by pivoting it from a long format to a wide format.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content/Module04"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../../_bblearn/Module04/Module04_walkthrough_SOLUTION.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Walkthrough</p>
      </div>
    </a>
    <a class="right-next"
       href="../../_bblearn/Module04/Module04_lab.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lab</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#food-table">Food Table</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#groupby">Groupby</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#aggregate">Aggregate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform">Transform</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pivot">Pivot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Will Dampier
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>